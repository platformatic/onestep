'use strict';function cov_vwieuvxrz(){var path="/Users/ivan-tymoshenko/projects/platformatic/onestep/tests/helper.js";var hash="dfd64daca50096c1949fa8226fd7b67fd9c5e210";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/ivan-tymoshenko/projects/platformatic/onestep/tests/helper.js",statementMap:{"0":{start:{line:3,column:17},end:{line:3,column:32}},"1":{start:{line:4,column:22},end:{line:4,column:44}},"2":{start:{line:6,column:16},end:{line:6,column:34}},"3":{start:{line:7,column:13},end:{line:7,column:28}},"4":{start:{line:10,column:2},end:{line:10,column:26}},"5":{start:{line:14,column:20},end:{line:14,column:48}},"6":{start:{line:15,column:2},end:{line:15,column:34}},"7":{start:{line:19,column:16},end:{line:19,column:61}},"8":{start:{line:20,column:25},end:{line:20,column:67}},"9":{start:{line:22,column:19},end:{line:22,column:61}},"10":{start:{line:23,column:18},end:{line:23,column:73}},"11":{start:{line:25,column:18},end:{line:44,column:3}},"12":{start:{line:46,column:32},end:{line:46,column:71}},"13":{start:{line:47,column:2},end:{line:47,column:65}},"14":{start:{line:48,column:2},end:{line:48,column:60}},"15":{start:{line:50,column:2},end:{line:50,column:58}},"16":{start:{line:54,column:2},end:{line:56,column:19}},"17":{start:{line:58,column:2},end:{line:60,column:19}},"18":{start:{line:62,column:2},end:{line:80,column:6}},"19":{start:{line:84,column:23},end:{line:84,column:55}},"20":{start:{line:86,column:2},end:{line:94,column:4}},"21":{start:{line:87,column:33},end:{line:87,column:75}},"22":{start:{line:88,column:4},end:{line:88,column:46}},"23":{start:{line:90,column:4},end:{line:93,column:5}},"24":{start:{line:96,column:2},end:{line:101,column:4}},"25":{start:{line:97,column:37},end:{line:97,column:83}},"26":{start:{line:98,column:4},end:{line:98,column:50}},"27":{start:{line:100,column:4},end:{line:100,column:43}},"28":{start:{line:103,column:2},end:{line:105,column:4}},"29":{start:{line:104,column:4},end:{line:104,column:30}},"30":{start:{line:106,column:2},end:{line:106,column:43}},"31":{start:{line:107,column:2},end:{line:107,column:21}},"32":{start:{line:111,column:16},end:{line:111,column:48}},"33":{start:{line:113,column:2},end:{line:117,column:3}},"34":{start:{line:116,column:32},end:{line:116,column:38}},"35":{start:{line:119,column:2},end:{line:121,column:4}},"36":{start:{line:120,column:4},end:{line:120,column:40}},"37":{start:{line:123,column:2},end:{line:125,column:4}},"38":{start:{line:124,column:4},end:{line:124,column:23}},"39":{start:{line:126,column:2},end:{line:126,column:36}},"40":{start:{line:127,column:2},end:{line:127,column:14}},"41":{start:{line:131,column:18},end:{line:131,column:50}},"42":{start:{line:133,column:2},end:{line:135,column:4}},"43":{start:{line:134,column:4},end:{line:134,column:34}},"44":{start:{line:137,column:2},end:{line:139,column:4}},"45":{start:{line:138,column:4},end:{line:138,column:25}},"46":{start:{line:140,column:2},end:{line:140,column:38}},"47":{start:{line:141,column:2},end:{line:141,column:16}},"48":{start:{line:144,column:0},end:{line:152,column:1}}},fnMap:{"0":{name:"setEnvVariable",decl:{start:{line:9,column:9},end:{line:9,column:23}},loc:{start:{line:9,column:37},end:{line:11,column:1}},line:9},"1":{name:"setInputParam",decl:{start:{line:13,column:9},end:{line:13,column:22}},loc:{start:{line:13,column:36},end:{line:16,column:1}},line:13},"2":{name:"createRepository",decl:{start:{line:18,column:15},end:{line:18,column:31}},loc:{start:{line:18,column:71},end:{line:51,column:1}},line:18},"3":{name:"startGithubApi",decl:{start:{line:53,column:9},end:{line:53,column:23}},loc:{start:{line:53,column:67},end:{line:81,column:1}},line:53},"4":{name:"startControlPanel",decl:{start:{line:83,column:15},end:{line:83,column:32}},loc:{start:{line:83,column:51},end:{line:108,column:1}},line:83},"5":{name:"(anonymous_5)",decl:{start:{line:86,column:32},end:{line:86,column:33}},loc:{start:{line:86,column:58},end:{line:94,column:3}},line:86},"6":{name:"(anonymous_6)",decl:{start:{line:87,column:66},end:{line:87,column:67}},loc:{start:{line:87,column:72},end:{line:87,column:74}},line:87},"7":{name:"(anonymous_7)",decl:{start:{line:96,column:53},end:{line:96,column:54}},loc:{start:{line:96,column:79},end:{line:101,column:3}},line:96},"8":{name:"(anonymous_8)",decl:{start:{line:97,column:74},end:{line:97,column:75}},loc:{start:{line:97,column:80},end:{line:97,column:82}},line:97},"9":{name:"(anonymous_9)",decl:{start:{line:103,column:13},end:{line:103,column:14}},loc:{start:{line:103,column:25},end:{line:105,column:3}},line:103},"10":{name:"startHarry",decl:{start:{line:110,column:15},end:{line:110,column:25}},loc:{start:{line:110,column:57},end:{line:128,column:1}},line:110},"11":{name:"(anonymous_11)",decl:{start:{line:110,column:47},end:{line:110,column:48}},loc:{start:{line:110,column:53},end:{line:110,column:55}},line:110},"12":{name:"(anonymous_12)",decl:{start:{line:116,column:4},end:{line:116,column:5}},loc:{start:{line:116,column:32},end:{line:116,column:38}},line:116},"13":{name:"(anonymous_13)",decl:{start:{line:119,column:23},end:{line:119,column:24}},loc:{start:{line:119,column:49},end:{line:121,column:3}},line:119},"14":{name:"(anonymous_14)",decl:{start:{line:123,column:13},end:{line:123,column:14}},loc:{start:{line:123,column:25},end:{line:125,column:3}},line:123},"15":{name:"startMachine",decl:{start:{line:130,column:15},end:{line:130,column:27}},loc:{start:{line:130,column:42},end:{line:142,column:1}},line:130},"16":{name:"(anonymous_16)",decl:{start:{line:133,column:19},end:{line:133,column:20}},loc:{start:{line:133,column:45},end:{line:135,column:3}},line:133},"17":{name:"(anonymous_17)",decl:{start:{line:137,column:13},end:{line:137,column:14}},loc:{start:{line:137,column:25},end:{line:139,column:3}},line:137}},branchMap:{"0":{loc:{start:{line:18,column:47},end:{line:18,column:69}},type:"default-arg",locations:[{start:{line:18,column:67},end:{line:18,column:69}}],line:18},"1":{loc:{start:{line:19,column:16},end:{line:19,column:61}},type:"binary-expr",locations:[{start:{line:19,column:16},end:{line:19,column:39}},{start:{line:19,column:43},end:{line:19,column:61}}],line:19},"2":{loc:{start:{line:20,column:25},end:{line:20,column:67}},type:"binary-expr",locations:[{start:{line:20,column:25},end:{line:20,column:47}},{start:{line:20,column:51},end:{line:20,column:67}}],line:20},"3":{loc:{start:{line:22,column:19},end:{line:22,column:61}},type:"binary-expr",locations:[{start:{line:22,column:19},end:{line:22,column:56}},{start:{line:22,column:60},end:{line:22,column:61}}],line:22},"4":{loc:{start:{line:23,column:18},end:{line:23,column:73}},type:"binary-expr",locations:[{start:{line:23,column:18},end:{line:23,column:54}},{start:{line:23,column:58},end:{line:23,column:73}}],line:23},"5":{loc:{start:{line:83,column:37},end:{line:83,column:49}},type:"default-arg",locations:[{start:{line:83,column:47},end:{line:83,column:49}}],line:83},"6":{loc:{start:{line:87,column:33},end:{line:87,column:75}},type:"binary-expr",locations:[{start:{line:87,column:33},end:{line:87,column:61}},{start:{line:87,column:66},end:{line:87,column:74}}],line:87},"7":{loc:{start:{line:97,column:37},end:{line:97,column:83}},type:"binary-expr",locations:[{start:{line:97,column:37},end:{line:97,column:69}},{start:{line:97,column:74},end:{line:97,column:82}}],line:97},"8":{loc:{start:{line:110,column:30},end:{line:110,column:55}},type:"default-arg",locations:[{start:{line:110,column:47},end:{line:110,column:55}}],line:110}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0],"6":[0,0],"7":[0,0],"8":[0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dfd64daca50096c1949fa8226fd7b67fd9c5e210"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_vwieuvxrz=function(){return actualCoverage;};}return actualCoverage;}cov_vwieuvxrz();const{join}=(cov_vwieuvxrz().s[0]++,require('path'));const{writeFile}=(cov_vwieuvxrz().s[1]++,require('fs/promises'));const fastify=(cov_vwieuvxrz().s[2]++,require('fastify'));const nock=(cov_vwieuvxrz().s[3]++,require('nock'));function setEnvVariable(key,value){cov_vwieuvxrz().f[0]++;cov_vwieuvxrz().s[4]++;process.env[key]=value;}function setInputParam(key,value){cov_vwieuvxrz().f[1]++;const envVarKey=(cov_vwieuvxrz().s[5]++,'INPUT_'+key.toUpperCase());cov_vwieuvxrz().s[6]++;setEnvVariable(envVarKey,value);}async function createRepository(actionFolder,repositoryOptions=(cov_vwieuvxrz().b[0][0]++,{})){cov_vwieuvxrz().f[2]++;const owner=(cov_vwieuvxrz().s[7]++,(cov_vwieuvxrz().b[1][0]++,repositoryOptions.owner)||(cov_vwieuvxrz().b[1][1]++,'test-github-user'));const repositoryName=(cov_vwieuvxrz().s[8]++,(cov_vwieuvxrz().b[2][0]++,repositoryOptions.name)||(cov_vwieuvxrz().b[2][1]++,'test-repo-name'));const prNumber=(cov_vwieuvxrz().s[9]++,(cov_vwieuvxrz().b[3][0]++,repositoryOptions.pullRequest?.number)||(cov_vwieuvxrz().b[3][1]++,1));const prTitle=(cov_vwieuvxrz().s[10]++,(cov_vwieuvxrz().b[4][0]++,repositoryOptions.pullRequest?.title)||(cov_vwieuvxrz().b[4][1]++,'Test PR title'));const payload=(cov_vwieuvxrz().s[11]++,{pull_request:{number:prNumber,base:{repo:{owner:{login:owner},name:repositoryName}}},repository:{name:repositoryName,html_url:`https://github.com/${owner}/${repositoryName}`,owner:{login:owner}}});const githubEventConfigPath=(cov_vwieuvxrz().s[12]++,join(actionFolder,'github_event.json'));cov_vwieuvxrz().s[13]++;await writeFile(githubEventConfigPath,JSON.stringify(payload));cov_vwieuvxrz().s[14]++;setEnvVariable('GITHUB_EVENT_PATH',githubEventConfigPath);cov_vwieuvxrz().s[15]++;startGithubApi(owner,repositoryName,prNumber,prTitle);}function startGithubApi(owner,repositoryName,prNumber,prTitle){cov_vwieuvxrz().f[3]++;cov_vwieuvxrz().s[16]++;nock('https://api.github.com').post(`/repos/${owner}/${repositoryName}/issues/${prNumber}/comments`).reply(200,{});cov_vwieuvxrz().s[17]++;nock('https://api.github.com').get(`/repos/${owner}/${repositoryName}/issues/${prNumber}/comments`).reply(200,[]);cov_vwieuvxrz().s[18]++;nock('https://api.github.com').get(`/repos/${owner}/${repositoryName}/pulls/${prNumber}`).reply(200,{head:{sha:'1234',ref:'test',repo:{full_name:`${owner}/${repositoryName}`,html_url:`https://github.com/${owner}/${repositoryName}`},user:{login:owner}},title:prTitle,number:prNumber,additions:1,deletions:1});}async function startControlPanel(t,options=(cov_vwieuvxrz().b[5][0]++,{})){cov_vwieuvxrz().f[4]++;const controlPanel=(cov_vwieuvxrz().s[19]++,fastify({keepAliveTimeout:1}));cov_vwieuvxrz().s[20]++;controlPanel.post('/bundles',async(request,reply)=>{cov_vwieuvxrz().f[5]++;const createBundleCallback=(cov_vwieuvxrz().s[21]++,(cov_vwieuvxrz().b[6][0]++,options.createBundleCallback)||(cov_vwieuvxrz().b[6][1]++,()=>{cov_vwieuvxrz().f[6]++;}));cov_vwieuvxrz().s[22]++;await createBundleCallback(request,reply);cov_vwieuvxrz().s[23]++;return{bundleId:'default-bundle-id',uploadToken:'default-upload-token'};});cov_vwieuvxrz().s[24]++;controlPanel.post('/bundles/:bundleId/deployment',async(request,reply)=>{cov_vwieuvxrz().f[7]++;const createDeploymentCallback=(cov_vwieuvxrz().s[25]++,(cov_vwieuvxrz().b[7][0]++,options.createDeploymentCallback)||(cov_vwieuvxrz().b[7][1]++,()=>{cov_vwieuvxrz().f[8]++;}));cov_vwieuvxrz().s[26]++;await createDeploymentCallback(request,reply);cov_vwieuvxrz().s[27]++;return{url:'http://localhost:3044'};});cov_vwieuvxrz().s[28]++;t.teardown(async()=>{cov_vwieuvxrz().f[9]++;cov_vwieuvxrz().s[29]++;await controlPanel.close();});cov_vwieuvxrz().s[30]++;await controlPanel.listen({port:3042});cov_vwieuvxrz().s[31]++;return controlPanel;}async function startHarry(t,uploadCallback=(cov_vwieuvxrz().b[8][0]++,()=>{cov_vwieuvxrz().f[11]++;})){cov_vwieuvxrz().f[10]++;const harry=(cov_vwieuvxrz().s[32]++,fastify({keepAliveTimeout:1}));cov_vwieuvxrz().s[33]++;harry.addContentTypeParser('application/x-tar',{bodyLimit:1024*1024*1024},(request,payload,done)=>{cov_vwieuvxrz().f[12]++;cov_vwieuvxrz().s[34]++;return done();});cov_vwieuvxrz().s[35]++;harry.put('/upload',async(request,reply)=>{cov_vwieuvxrz().f[13]++;cov_vwieuvxrz().s[36]++;await uploadCallback(request,reply);});cov_vwieuvxrz().s[37]++;t.teardown(async()=>{cov_vwieuvxrz().f[14]++;cov_vwieuvxrz().s[38]++;await harry.close();});cov_vwieuvxrz().s[39]++;await harry.listen({port:3043});cov_vwieuvxrz().s[40]++;return harry;}async function startMachine(t,callback){cov_vwieuvxrz().f[15]++;const machine=(cov_vwieuvxrz().s[41]++,fastify({keepAliveTimeout:1}));cov_vwieuvxrz().s[42]++;machine.get('/',async(request,reply)=>{cov_vwieuvxrz().f[16]++;cov_vwieuvxrz().s[43]++;await callback(request,reply);});cov_vwieuvxrz().s[44]++;t.teardown(async()=>{cov_vwieuvxrz().f[17]++;cov_vwieuvxrz().s[45]++;await machine.close();});cov_vwieuvxrz().s[46]++;await machine.listen({port:3044});cov_vwieuvxrz().s[47]++;return machine;}cov_vwieuvxrz().s[48]++;module.exports={setEnvVariable,setInputParam,createRepository,startControlPanel,startHarry,startMachine,startGithubApi};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqb2luIiwicmVxdWlyZSIsIndyaXRlRmlsZSIsImZhc3RpZnkiLCJub2NrIiwic2V0RW52VmFyaWFibGUiLCJrZXkiLCJ2YWx1ZSIsInByb2Nlc3MiLCJlbnYiLCJzZXRJbnB1dFBhcmFtIiwiZW52VmFyS2V5IiwidG9VcHBlckNhc2UiLCJjcmVhdGVSZXBvc2l0b3J5IiwiYWN0aW9uRm9sZGVyIiwicmVwb3NpdG9yeU9wdGlvbnMiLCJvd25lciIsInJlcG9zaXRvcnlOYW1lIiwibmFtZSIsInByTnVtYmVyIiwicHVsbFJlcXVlc3QiLCJudW1iZXIiLCJwclRpdGxlIiwidGl0bGUiLCJwYXlsb2FkIiwicHVsbF9yZXF1ZXN0IiwiYmFzZSIsInJlcG8iLCJsb2dpbiIsInJlcG9zaXRvcnkiLCJodG1sX3VybCIsImdpdGh1YkV2ZW50Q29uZmlnUGF0aCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdGFydEdpdGh1YkFwaSIsInBvc3QiLCJyZXBseSIsImdldCIsImhlYWQiLCJzaGEiLCJyZWYiLCJmdWxsX25hbWUiLCJ1c2VyIiwiYWRkaXRpb25zIiwiZGVsZXRpb25zIiwic3RhcnRDb250cm9sUGFuZWwiLCJ0Iiwib3B0aW9ucyIsImNvbnRyb2xQYW5lbCIsImtlZXBBbGl2ZVRpbWVvdXQiLCJyZXF1ZXN0IiwiY3JlYXRlQnVuZGxlQ2FsbGJhY2siLCJidW5kbGVJZCIsInVwbG9hZFRva2VuIiwiY3JlYXRlRGVwbG95bWVudENhbGxiYWNrIiwidXJsIiwidGVhcmRvd24iLCJjbG9zZSIsImxpc3RlbiIsInBvcnQiLCJzdGFydEhhcnJ5IiwidXBsb2FkQ2FsbGJhY2siLCJoYXJyeSIsImFkZENvbnRlbnRUeXBlUGFyc2VyIiwiYm9keUxpbWl0IiwiZG9uZSIsInB1dCIsInN0YXJ0TWFjaGluZSIsImNhbGxiYWNrIiwibWFjaGluZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJoZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IHsgam9pbiB9ID0gcmVxdWlyZSgncGF0aCcpXG5jb25zdCB7IHdyaXRlRmlsZSB9ID0gcmVxdWlyZSgnZnMvcHJvbWlzZXMnKVxuXG5jb25zdCBmYXN0aWZ5ID0gcmVxdWlyZSgnZmFzdGlmeScpXG5jb25zdCBub2NrID0gcmVxdWlyZSgnbm9jaycpXG5cbmZ1bmN0aW9uIHNldEVudlZhcmlhYmxlIChrZXksIHZhbHVlKSB7XG4gIHByb2Nlc3MuZW52W2tleV0gPSB2YWx1ZVxufVxuXG5mdW5jdGlvbiBzZXRJbnB1dFBhcmFtIChrZXksIHZhbHVlKSB7XG4gIGNvbnN0IGVudlZhcktleSA9ICdJTlBVVF8nICsga2V5LnRvVXBwZXJDYXNlKClcbiAgc2V0RW52VmFyaWFibGUoZW52VmFyS2V5LCB2YWx1ZSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUmVwb3NpdG9yeSAoYWN0aW9uRm9sZGVyLCByZXBvc2l0b3J5T3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IG93bmVyID0gcmVwb3NpdG9yeU9wdGlvbnMub3duZXIgfHwgJ3Rlc3QtZ2l0aHViLXVzZXInXG4gIGNvbnN0IHJlcG9zaXRvcnlOYW1lID0gcmVwb3NpdG9yeU9wdGlvbnMubmFtZSB8fCAndGVzdC1yZXBvLW5hbWUnXG5cbiAgY29uc3QgcHJOdW1iZXIgPSByZXBvc2l0b3J5T3B0aW9ucy5wdWxsUmVxdWVzdD8ubnVtYmVyIHx8IDFcbiAgY29uc3QgcHJUaXRsZSA9IHJlcG9zaXRvcnlPcHRpb25zLnB1bGxSZXF1ZXN0Py50aXRsZSB8fCAnVGVzdCBQUiB0aXRsZSdcblxuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIHB1bGxfcmVxdWVzdDoge1xuICAgICAgbnVtYmVyOiBwck51bWJlcixcbiAgICAgIGJhc2U6IHtcbiAgICAgICAgcmVwbzoge1xuICAgICAgICAgIG93bmVyOiB7XG4gICAgICAgICAgICBsb2dpbjogb3duZXJcbiAgICAgICAgICB9LFxuICAgICAgICAgIG5hbWU6IHJlcG9zaXRvcnlOYW1lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHJlcG9zaXRvcnk6IHtcbiAgICAgIG5hbWU6IHJlcG9zaXRvcnlOYW1lLFxuICAgICAgaHRtbF91cmw6IGBodHRwczovL2dpdGh1Yi5jb20vJHtvd25lcn0vJHtyZXBvc2l0b3J5TmFtZX1gLFxuICAgICAgb3duZXI6IHtcbiAgICAgICAgbG9naW46IG93bmVyXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZ2l0aHViRXZlbnRDb25maWdQYXRoID0gam9pbihhY3Rpb25Gb2xkZXIsICdnaXRodWJfZXZlbnQuanNvbicpXG4gIGF3YWl0IHdyaXRlRmlsZShnaXRodWJFdmVudENvbmZpZ1BhdGgsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKVxuICBzZXRFbnZWYXJpYWJsZSgnR0lUSFVCX0VWRU5UX1BBVEgnLCBnaXRodWJFdmVudENvbmZpZ1BhdGgpXG5cbiAgc3RhcnRHaXRodWJBcGkob3duZXIsIHJlcG9zaXRvcnlOYW1lLCBwck51bWJlciwgcHJUaXRsZSlcbn1cblxuZnVuY3Rpb24gc3RhcnRHaXRodWJBcGkgKG93bmVyLCByZXBvc2l0b3J5TmFtZSwgcHJOdW1iZXIsIHByVGl0bGUpIHtcbiAgbm9jaygnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbScpXG4gICAgLnBvc3QoYC9yZXBvcy8ke293bmVyfS8ke3JlcG9zaXRvcnlOYW1lfS9pc3N1ZXMvJHtwck51bWJlcn0vY29tbWVudHNgKVxuICAgIC5yZXBseSgyMDAsIHt9KVxuXG4gIG5vY2soJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20nKVxuICAgIC5nZXQoYC9yZXBvcy8ke293bmVyfS8ke3JlcG9zaXRvcnlOYW1lfS9pc3N1ZXMvJHtwck51bWJlcn0vY29tbWVudHNgKVxuICAgIC5yZXBseSgyMDAsIFtdKVxuXG4gIG5vY2soJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20nKVxuICAgIC5nZXQoYC9yZXBvcy8ke293bmVyfS8ke3JlcG9zaXRvcnlOYW1lfS9wdWxscy8ke3ByTnVtYmVyfWApXG4gICAgLnJlcGx5KDIwMCwge1xuICAgICAgaGVhZDoge1xuICAgICAgICBzaGE6ICcxMjM0JyxcbiAgICAgICAgcmVmOiAndGVzdCcsXG4gICAgICAgIHJlcG86IHtcbiAgICAgICAgICBmdWxsX25hbWU6IGAke293bmVyfS8ke3JlcG9zaXRvcnlOYW1lfWAsXG4gICAgICAgICAgaHRtbF91cmw6IGBodHRwczovL2dpdGh1Yi5jb20vJHtvd25lcn0vJHtyZXBvc2l0b3J5TmFtZX1gXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBsb2dpbjogb3duZXJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRpdGxlOiBwclRpdGxlLFxuICAgICAgbnVtYmVyOiBwck51bWJlcixcbiAgICAgIGFkZGl0aW9uczogMSxcbiAgICAgIGRlbGV0aW9uczogMVxuICAgIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0Q29udHJvbFBhbmVsICh0LCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgY29udHJvbFBhbmVsID0gZmFzdGlmeSh7IGtlZXBBbGl2ZVRpbWVvdXQ6IDEgfSlcblxuICBjb250cm9sUGFuZWwucG9zdCgnL2J1bmRsZXMnLCBhc3luYyAocmVxdWVzdCwgcmVwbHkpID0+IHtcbiAgICBjb25zdCBjcmVhdGVCdW5kbGVDYWxsYmFjayA9IG9wdGlvbnMuY3JlYXRlQnVuZGxlQ2FsbGJhY2sgfHwgKCgpID0+IHt9KVxuICAgIGF3YWl0IGNyZWF0ZUJ1bmRsZUNhbGxiYWNrKHJlcXVlc3QsIHJlcGx5KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJ1bmRsZUlkOiAnZGVmYXVsdC1idW5kbGUtaWQnLFxuICAgICAgdXBsb2FkVG9rZW46ICdkZWZhdWx0LXVwbG9hZC10b2tlbidcbiAgICB9XG4gIH0pXG5cbiAgY29udHJvbFBhbmVsLnBvc3QoJy9idW5kbGVzLzpidW5kbGVJZC9kZXBsb3ltZW50JywgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgY29uc3QgY3JlYXRlRGVwbG95bWVudENhbGxiYWNrID0gb3B0aW9ucy5jcmVhdGVEZXBsb3ltZW50Q2FsbGJhY2sgfHwgKCgpID0+IHt9KVxuICAgIGF3YWl0IGNyZWF0ZURlcGxveW1lbnRDYWxsYmFjayhyZXF1ZXN0LCByZXBseSlcblxuICAgIHJldHVybiB7IHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzA0NCcgfVxuICB9KVxuXG4gIHQudGVhcmRvd24oYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGNvbnRyb2xQYW5lbC5jbG9zZSgpXG4gIH0pXG4gIGF3YWl0IGNvbnRyb2xQYW5lbC5saXN0ZW4oeyBwb3J0OiAzMDQyIH0pXG4gIHJldHVybiBjb250cm9sUGFuZWxcbn1cblxuYXN5bmMgZnVuY3Rpb24gc3RhcnRIYXJyeSAodCwgdXBsb2FkQ2FsbGJhY2sgPSAoKSA9PiB7fSkge1xuICBjb25zdCBoYXJyeSA9IGZhc3RpZnkoeyBrZWVwQWxpdmVUaW1lb3V0OiAxIH0pXG5cbiAgaGFycnkuYWRkQ29udGVudFR5cGVQYXJzZXIoXG4gICAgJ2FwcGxpY2F0aW9uL3gtdGFyJyxcbiAgICB7IGJvZHlMaW1pdDogMTAyNCAqIDEwMjQgKiAxMDI0IH0sXG4gICAgKHJlcXVlc3QsIHBheWxvYWQsIGRvbmUpID0+IGRvbmUoKVxuICApXG5cbiAgaGFycnkucHV0KCcvdXBsb2FkJywgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgYXdhaXQgdXBsb2FkQ2FsbGJhY2socmVxdWVzdCwgcmVwbHkpXG4gIH0pXG5cbiAgdC50ZWFyZG93bihhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgaGFycnkuY2xvc2UoKVxuICB9KVxuICBhd2FpdCBoYXJyeS5saXN0ZW4oeyBwb3J0OiAzMDQzIH0pXG4gIHJldHVybiBoYXJyeVxufVxuXG5hc3luYyBmdW5jdGlvbiBzdGFydE1hY2hpbmUgKHQsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IG1hY2hpbmUgPSBmYXN0aWZ5KHsga2VlcEFsaXZlVGltZW91dDogMSB9KVxuXG4gIG1hY2hpbmUuZ2V0KCcvJywgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgYXdhaXQgY2FsbGJhY2socmVxdWVzdCwgcmVwbHkpXG4gIH0pXG5cbiAgdC50ZWFyZG93bihhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgbWFjaGluZS5jbG9zZSgpXG4gIH0pXG4gIGF3YWl0IG1hY2hpbmUubGlzdGVuKHsgcG9ydDogMzA0NCB9KVxuICByZXR1cm4gbWFjaGluZVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0RW52VmFyaWFibGUsXG4gIHNldElucHV0UGFyYW0sXG4gIGNyZWF0ZVJlcG9zaXRvcnksXG4gIHN0YXJ0Q29udHJvbFBhbmVsLFxuICBzdGFydEhhcnJ5LFxuICBzdGFydE1hY2hpbmUsXG4gIHN0YXJ0R2l0aHViQXBpXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksZ3BRQWVBO0FBQUEseUZBYlosS0FBTSxDQUFFQSxJQUFLLENBQUMseUJBQUdDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFDaEMsS0FBTSxDQUFFQyxTQUFVLENBQUMseUJBQUdELE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFFNUMsS0FBTUUsUUFBTyx5QkFBR0YsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUNsQyxLQUFNRyxLQUFJLHlCQUFHSCxPQUFPLENBQUMsTUFBTSxDQUFDLEVBRTVCLFFBQVNJLGVBQWMsQ0FBRUMsR0FBRyxDQUFFQyxLQUFLLENBQUUsK0NBQ25DQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0gsR0FBRyxDQUFDLENBQUdDLEtBQUssQ0FDMUIsQ0FFQSxRQUFTRyxjQUFhLENBQUVKLEdBQUcsQ0FBRUMsS0FBSyxDQUFFLHdCQUNsQyxLQUFNSSxVQUFTLHlCQUFHLFFBQVEsQ0FBR0wsR0FBRyxDQUFDTSxXQUFXLEVBQUUseUJBQzlDUCxjQUFjLENBQUNNLFNBQVMsQ0FBRUosS0FBSyxDQUFDLENBQ2xDLENBRUEsY0FBZU0saUJBQWdCLENBQUVDLFlBQVksQ0FBRUMsaUJBQWlCLDRCQUFHLENBQUMsQ0FBQyxF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