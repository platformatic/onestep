'use strict';function cov_m3vzi29jy(){var path="/Users/ivan-tymoshenko/projects/platformatic/onestep/tests/execute.js";var hash="aad0b6db58274d7138a8386e1f982b3ae8aa7597";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/ivan-tymoshenko/projects/platformatic/onestep/tests/execute.js",statementMap:{"0":{start:{line:3,column:19},end:{line:3,column:32}},"1":{start:{line:4,column:17},end:{line:4,column:32}},"2":{start:{line:5,column:28},end:{line:5,column:50}},"3":{start:{line:7,column:29},end:{line:7,column:51}},"4":{start:{line:9,column:23},end:{line:17,column:1}},"5":{start:{line:20,column:26},end:{line:20,column:52}},"6":{start:{line:22,column:22},end:{line:22,column:66}},"7":{start:{line:23,column:23},end:{line:23,column:67}},"8":{start:{line:24,column:25},end:{line:24,column:72}},"9":{start:{line:25,column:2},end:{line:25,column:60}},"10":{start:{line:27,column:2},end:{line:29,column:3}},"11":{start:{line:28,column:4},end:{line:28,column:40}},"12":{start:{line:31,column:2},end:{line:31,column:62}},"13":{start:{line:32,column:2},end:{line:32,column:47}},"14":{start:{line:34,column:2},end:{line:39,column:3}},"15":{start:{line:35,column:26},end:{line:35,column:49}},"16":{start:{line:36,column:4},end:{line:36,column:25}},"17":{start:{line:38,column:4},end:{line:38,column:47}},"18":{start:{line:42,column:0},end:{line:42,column:5}}},fnMap:{"0":{name:"run",decl:{start:{line:19,column:15},end:{line:19,column:18}},loc:{start:{line:19,column:22},end:{line:40,column:1}},line:19}},branchMap:{"0":{loc:{start:{line:20,column:26},end:{line:20,column:52}},type:"binary-expr",locations:[{start:{line:20,column:26},end:{line:20,column:41}},{start:{line:20,column:45},end:{line:20,column:52}}],line:20},"1":{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:27,column:2},end:{line:29,column:3}}],line:27}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aad0b6db58274d7138a8386e1f982b3ae8aa7597"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_m3vzi29jy=function(){return actualCoverage;};}return actualCoverage;}cov_m3vzi29jy();const{tmpdir}=(cov_m3vzi29jy().s[0]++,require('os'));const{join}=(cov_m3vzi29jy().s[1]++,require('path'));const{mkdtemp,cp,rm}=(cov_m3vzi29jy().s[2]++,require('fs/promises'));const{createRepository}=(cov_m3vzi29jy().s[3]++,require('./helper.js'));const defaultEnvVars=(cov_m3vzi29jy().s[4]++,{GITHUB_WORKSPACE:'',STEVE_SERVER_URL:'http://localhost:3042',HARRY_SERVER_URL:'http://localhost:3043',INPUT_PLATFORMATIC_API_KEY:'1234',INPUT_GITHUB_TOKEN:'test'});async function run(){cov_m3vzi29jy().f[0]++;const testProjectName=(cov_m3vzi29jy().s[5]++,(cov_m3vzi29jy().b[0][0]++,process.argv[2])||(cov_m3vzi29jy().b[0][1]++,'basic'));const projectPath=(cov_m3vzi29jy().s[6]++,join(__dirname,'fixtures',testProjectName));const actionFolder=(cov_m3vzi29jy().s[7]++,await mkdtemp(join(tmpdir(),'action_env_')));const repositoryPath=(cov_m3vzi29jy().s[8]++,await mkdtemp(join(actionFolder,'repository')));cov_m3vzi29jy().s[9]++;await cp(projectPath,repositoryPath,{recursive:true});cov_m3vzi29jy().s[10]++;if(process.env.GITHUB_EVENT_PATH!=='skip'){cov_m3vzi29jy().b[1][0]++;cov_m3vzi29jy().s[11]++;await createRepository(actionFolder);}else{cov_m3vzi29jy().b[1][1]++;}cov_m3vzi29jy().s[12]++;process.env=Object.assign({},defaultEnvVars,process.env);cov_m3vzi29jy().s[13]++;process.env.GITHUB_WORKSPACE=repositoryPath;cov_m3vzi29jy().s[14]++;try{const executeAction=(cov_m3vzi29jy().s[15]++,require('../action.js'));cov_m3vzi29jy().s[16]++;await executeAction();}finally{cov_m3vzi29jy().s[17]++;await rm(actionFolder,{recursive:true});}}cov_m3vzi29jy().s[18]++;run();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0bXBkaXIiLCJyZXF1aXJlIiwiam9pbiIsIm1rZHRlbXAiLCJjcCIsInJtIiwiY3JlYXRlUmVwb3NpdG9yeSIsImRlZmF1bHRFbnZWYXJzIiwiR0lUSFVCX1dPUktTUEFDRSIsIlNURVZFX1NFUlZFUl9VUkwiLCJIQVJSWV9TRVJWRVJfVVJMIiwiSU5QVVRfUExBVEZPUk1BVElDX0FQSV9LRVkiLCJJTlBVVF9HSVRIVUJfVE9LRU4iLCJydW4iLCJ0ZXN0UHJvamVjdE5hbWUiLCJwcm9jZXNzIiwiYXJndiIsInByb2plY3RQYXRoIiwiX19kaXJuYW1lIiwiYWN0aW9uRm9sZGVyIiwicmVwb3NpdG9yeVBhdGgiLCJyZWN1cnNpdmUiLCJlbnYiLCJHSVRIVUJfRVZFTlRfUEFUSCIsIk9iamVjdCIsImFzc2lnbiIsImV4ZWN1dGVBY3Rpb24iXSwic291cmNlcyI6WyJleGVjdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCB7IHRtcGRpciB9ID0gcmVxdWlyZSgnb3MnKVxuY29uc3QgeyBqb2luIH0gPSByZXF1aXJlKCdwYXRoJylcbmNvbnN0IHsgbWtkdGVtcCwgY3AsIHJtIH0gPSByZXF1aXJlKCdmcy9wcm9taXNlcycpXG5cbmNvbnN0IHsgY3JlYXRlUmVwb3NpdG9yeSB9ID0gcmVxdWlyZSgnLi9oZWxwZXIuanMnKVxuXG5jb25zdCBkZWZhdWx0RW52VmFycyA9IHtcbiAgR0lUSFVCX1dPUktTUEFDRTogJycsXG5cbiAgU1RFVkVfU0VSVkVSX1VSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzA0MicsXG4gIEhBUlJZX1NFUlZFUl9VUkw6ICdodHRwOi8vbG9jYWxob3N0OjMwNDMnLFxuXG4gIElOUFVUX1BMQVRGT1JNQVRJQ19BUElfS0VZOiAnMTIzNCcsXG4gIElOUFVUX0dJVEhVQl9UT0tFTjogJ3Rlc3QnXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1biAoKSB7XG4gIGNvbnN0IHRlc3RQcm9qZWN0TmFtZSA9IHByb2Nlc3MuYXJndlsyXSB8fCAnYmFzaWMnXG5cbiAgY29uc3QgcHJvamVjdFBhdGggPSBqb2luKF9fZGlybmFtZSwgJ2ZpeHR1cmVzJywgdGVzdFByb2plY3ROYW1lKVxuICBjb25zdCBhY3Rpb25Gb2xkZXIgPSBhd2FpdCBta2R0ZW1wKGpvaW4odG1wZGlyKCksICdhY3Rpb25fZW52XycpKVxuICBjb25zdCByZXBvc2l0b3J5UGF0aCA9IGF3YWl0IG1rZHRlbXAoam9pbihhY3Rpb25Gb2xkZXIsICdyZXBvc2l0b3J5JykpXG4gIGF3YWl0IGNwKHByb2plY3RQYXRoLCByZXBvc2l0b3J5UGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSlcblxuICBpZiAocHJvY2Vzcy5lbnYuR0lUSFVCX0VWRU5UX1BBVEggIT09ICdza2lwJykge1xuICAgIGF3YWl0IGNyZWF0ZVJlcG9zaXRvcnkoYWN0aW9uRm9sZGVyKVxuICB9XG5cbiAgcHJvY2Vzcy5lbnYgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0RW52VmFycywgcHJvY2Vzcy5lbnYpXG4gIHByb2Nlc3MuZW52LkdJVEhVQl9XT1JLU1BBQ0UgPSByZXBvc2l0b3J5UGF0aFxuXG4gIHRyeSB7XG4gICAgY29uc3QgZXhlY3V0ZUFjdGlvbiA9IHJlcXVpcmUoJy4uL2FjdGlvbi5qcycpXG4gICAgYXdhaXQgZXhlY3V0ZUFjdGlvbigpXG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgcm0oYWN0aW9uRm9sZGVyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICB9XG59XG5cbnJ1bigpXG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksd3pFQWVBO0FBQUEseUZBYlosS0FBTSxDQUFFQSxNQUFPLENBQUMseUJBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFDaEMsS0FBTSxDQUFFQyxJQUFLLENBQUMseUJBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFDaEMsS0FBTSxDQUFFRSxPQUFPLENBQUVDLEVBQUUsQ0FBRUMsRUFBRyxDQUFDLHlCQUFHSixPQUFPLENBQUMsYUFBYSxDQUFDLEVBRWxELEtBQU0sQ0FBRUssZ0JBQWlCLENBQUMseUJBQUdMLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFFbkQsS0FBTU0sZUFBYyx5QkFBRyxDQUNyQkMsZ0JBQWdCLENBQUUsRUFBRSxDQUVwQkMsZ0JBQWdCLENBQUUsdUJBQXVCLENBQ3pDQyxnQkFBZ0IsQ0FBRSx1QkFBdUIsQ0FFekNDLDBCQUEwQixDQUFFLE1BQU0sQ0FDbENDLGtCQUFrQixDQUFFLE1BQ3RCLENBQUMsRUFFRCxjQUFlQyxJQUFHLEVBQUksd0JBQ3BCLEtBQU1DLGdCQUFlLHlCQUFHLDJCQUFBQyxPQUFPLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUMsOEJBQUksT0FBTyxHQUVsRCxLQUFNQyxZQUFXLHlCQUFHZixJQUFJLENBQUNnQixTQUFTLENBQUUsVUFBVSxDQUFFSixlQUFlLENBQUMsRUFDaEUsS0FBTUssYUFBWSx5QkFBRyxLQUFNaEIsUUFBTyxDQUFDRCxJQUFJLENBQUNGLE1BQU0sRUFBRSxDQUFFLGFBQWEsQ0FBQyxDQUFDLEVBQ2pFLEtBQU1vQixlQUFjLHlCQUFHLEtBQU1qQixRQUFPLENBQUNELElBQUksQ0FBQ2lCLFlBQVksQ0FBRSxZQUFZLENBQUMsQ0FBQyx5QkFDdEUsS0FBTWYsR0FBRSxDQUFDYSxXQUFXLENBQUVHLGNBQWMsQ0FBRSxDQUFFQyxTQUFTLENBQUUsSUFBSyxDQUFDLENBQUMseUJBRTFELEdBQUlOLE9BQU8sQ0FBQ08sR0FBRyxDQUFDQyxpQkFBaUIsR0FBSyxNQUFNLENBQUUsbURBQzVDLEtBQU1qQixpQkFBZ0IsQ0FBQ2EsWUFBWSxDQUFDLENBQ3RDLENBQUMsd0RBRURKLE9BQU8sQ0FBQ08sR0FBRyxDQUFHRSxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBRWxCLGNBQWMsQ0FBRVEsT0FBTyxDQUFDTyxHQUFHLENBQUMseUJBQzVEUCxPQUFPLENBQUNPLEdBQUcsQ0FBQ2QsZ0JBQWdCLENBQUdZLGNBQWMseUJBRTdDLEdBQUksQ0FDRixLQUFNTSxjQUFhLDBCQUFHekIsT0FBTyxDQUFDLGNBQWMsQ0FBQywwQkFDN0MsS0FBTXlCLGNBQWEsRUFBRSxDQUN2QixDQUFDLE9BQVMseUJBQ1IsS0FBTXJCLEdBQUUsQ0FBQ2MsWUFBWSxDQUFFLENBQUVFLFNBQVMsQ0FBRSxJQUFLLENBQUMsQ0FBQyxDQUM3QyxDQUNGLENBQUMsd0JBRURSLEdBQUcsRUFBRSJ9