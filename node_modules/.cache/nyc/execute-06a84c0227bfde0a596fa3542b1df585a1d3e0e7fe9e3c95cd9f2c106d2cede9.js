'use strict';function cov_m3vzi29jy(){var path="/Users/ivan-tymoshenko/projects/platformatic/onestep/tests/execute.js";var hash="c78173d7e1772617fc387926866ca1258d901cd0";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/ivan-tymoshenko/projects/platformatic/onestep/tests/execute.js",statementMap:{"0":{start:{line:3,column:19},end:{line:3,column:32}},"1":{start:{line:4,column:17},end:{line:4,column:32}},"2":{start:{line:5,column:28},end:{line:5,column:50}},"3":{start:{line:7,column:29},end:{line:7,column:51}},"4":{start:{line:9,column:23},end:{line:19,column:1}},"5":{start:{line:22,column:26},end:{line:22,column:52}},"6":{start:{line:24,column:21},end:{line:24,column:65}},"7":{start:{line:25,column:23},end:{line:25,column:67}},"8":{start:{line:26,column:25},end:{line:26,column:72}},"9":{start:{line:27,column:2},end:{line:27,column:59}},"10":{start:{line:29,column:2},end:{line:29,column:38}},"11":{start:{line:30,column:2},end:{line:30,column:100}},"12":{start:{line:32,column:2},end:{line:37,column:3}},"13":{start:{line:33,column:26},end:{line:33,column:49}},"14":{start:{line:34,column:4},end:{line:34,column:25}},"15":{start:{line:36,column:4},end:{line:36,column:47}},"16":{start:{line:40,column:0},end:{line:40,column:5}}},fnMap:{"0":{name:"run",decl:{start:{line:21,column:15},end:{line:21,column:18}},loc:{start:{line:21,column:22},end:{line:38,column:1}},line:21}},branchMap:{"0":{loc:{start:{line:22,column:26},end:{line:22,column:52}},type:"binary-expr",locations:[{start:{line:22,column:26},end:{line:22,column:41}},{start:{line:22,column:45},end:{line:22,column:52}}],line:22}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c78173d7e1772617fc387926866ca1258d901cd0"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_m3vzi29jy=function(){return actualCoverage;};}return actualCoverage;}cov_m3vzi29jy();const{tmpdir}=(cov_m3vzi29jy().s[0]++,require('os'));const{join}=(cov_m3vzi29jy().s[1]++,require('path'));const{mkdtemp,cp,rm}=(cov_m3vzi29jy().s[2]++,require('fs/promises'));const{createRepository}=(cov_m3vzi29jy().s[3]++,require('./helper.js'));const defaultEnvVars=(cov_m3vzi29jy().s[4]++,{GITHUB_WORKSPACE:'',STEVE_SERVER_URL:'http://localhost:3042',HARRY_SERVER_URL:'http://localhost:3043',INPUT_PLATFORMATIC_API_KEY:'1234',INPUT_GITHUB_TOKEN:'test',PLT_ENV_VARIABLE3:'value3'});async function run(){cov_m3vzi29jy().f[0]++;const testProjectName=(cov_m3vzi29jy().s[5]++,(cov_m3vzi29jy().b[0][0]++,process.argv[2])||(cov_m3vzi29jy().b[0][1]++,'basic'));const fixtureDir=(cov_m3vzi29jy().s[6]++,join(__dirname,'fixtures',testProjectName));const actionFolder=(cov_m3vzi29jy().s[7]++,await mkdtemp(join(tmpdir(),'action_env_')));const repositoryPath=(cov_m3vzi29jy().s[8]++,await mkdtemp(join(actionFolder,'repository')));cov_m3vzi29jy().s[9]++;await cp(fixtureDir,repositoryPath,{recursive:true});cov_m3vzi29jy().s[10]++;await createRepository(actionFolder);cov_m3vzi29jy().s[11]++;process.env=Object.assign({},defaultEnvVars,process.env,{GITHUB_WORKSPACE:repositoryPath});cov_m3vzi29jy().s[12]++;try{const executeAction=(cov_m3vzi29jy().s[13]++,require('../action.js'));cov_m3vzi29jy().s[14]++;await executeAction();}finally{cov_m3vzi29jy().s[15]++;await rm(actionFolder,{recursive:true});}}cov_m3vzi29jy().s[16]++;run();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0bXBkaXIiLCJyZXF1aXJlIiwiam9pbiIsIm1rZHRlbXAiLCJjcCIsInJtIiwiY3JlYXRlUmVwb3NpdG9yeSIsImRlZmF1bHRFbnZWYXJzIiwiR0lUSFVCX1dPUktTUEFDRSIsIlNURVZFX1NFUlZFUl9VUkwiLCJIQVJSWV9TRVJWRVJfVVJMIiwiSU5QVVRfUExBVEZPUk1BVElDX0FQSV9LRVkiLCJJTlBVVF9HSVRIVUJfVE9LRU4iLCJQTFRfRU5WX1ZBUklBQkxFMyIsInJ1biIsInRlc3RQcm9qZWN0TmFtZSIsInByb2Nlc3MiLCJhcmd2IiwiZml4dHVyZURpciIsIl9fZGlybmFtZSIsImFjdGlvbkZvbGRlciIsInJlcG9zaXRvcnlQYXRoIiwicmVjdXJzaXZlIiwiZW52IiwiT2JqZWN0IiwiYXNzaWduIiwiZXhlY3V0ZUFjdGlvbiJdLCJzb3VyY2VzIjpbImV4ZWN1dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IHsgdG1wZGlyIH0gPSByZXF1aXJlKCdvcycpXG5jb25zdCB7IGpvaW4gfSA9IHJlcXVpcmUoJ3BhdGgnKVxuY29uc3QgeyBta2R0ZW1wLCBjcCwgcm0gfSA9IHJlcXVpcmUoJ2ZzL3Byb21pc2VzJylcblxuY29uc3QgeyBjcmVhdGVSZXBvc2l0b3J5IH0gPSByZXF1aXJlKCcuL2hlbHBlci5qcycpXG5cbmNvbnN0IGRlZmF1bHRFbnZWYXJzID0ge1xuICBHSVRIVUJfV09SS1NQQUNFOiAnJyxcblxuICBTVEVWRV9TRVJWRVJfVVJMOiAnaHR0cDovL2xvY2FsaG9zdDozMDQyJyxcbiAgSEFSUllfU0VSVkVSX1VSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzA0MycsXG5cbiAgSU5QVVRfUExBVEZPUk1BVElDX0FQSV9LRVk6ICcxMjM0JyxcbiAgSU5QVVRfR0lUSFVCX1RPS0VOOiAndGVzdCcsXG5cbiAgUExUX0VOVl9WQVJJQUJMRTM6ICd2YWx1ZTMnXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1biAoKSB7XG4gIGNvbnN0IHRlc3RQcm9qZWN0TmFtZSA9IHByb2Nlc3MuYXJndlsyXSB8fCAnYmFzaWMnXG5cbiAgY29uc3QgZml4dHVyZURpciA9IGpvaW4oX19kaXJuYW1lLCAnZml4dHVyZXMnLCB0ZXN0UHJvamVjdE5hbWUpXG4gIGNvbnN0IGFjdGlvbkZvbGRlciA9IGF3YWl0IG1rZHRlbXAoam9pbih0bXBkaXIoKSwgJ2FjdGlvbl9lbnZfJykpXG4gIGNvbnN0IHJlcG9zaXRvcnlQYXRoID0gYXdhaXQgbWtkdGVtcChqb2luKGFjdGlvbkZvbGRlciwgJ3JlcG9zaXRvcnknKSlcbiAgYXdhaXQgY3AoZml4dHVyZURpciwgcmVwb3NpdG9yeVBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG5cbiAgYXdhaXQgY3JlYXRlUmVwb3NpdG9yeShhY3Rpb25Gb2xkZXIpXG4gIHByb2Nlc3MuZW52ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEVudlZhcnMsIHByb2Nlc3MuZW52LCB7IEdJVEhVQl9XT1JLU1BBQ0U6IHJlcG9zaXRvcnlQYXRoIH0pXG5cbiAgdHJ5IHtcbiAgICBjb25zdCBleGVjdXRlQWN0aW9uID0gcmVxdWlyZSgnLi4vYWN0aW9uLmpzJylcbiAgICBhd2FpdCBleGVjdXRlQWN0aW9uKClcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCBybShhY3Rpb25Gb2xkZXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gIH1cbn1cblxucnVuKClcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxvL0RBZUE7QUFBQSx5RkFiWixLQUFNLENBQUVBLE1BQU8sQ0FBQyx5QkFBR0MsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUNoQyxLQUFNLENBQUVDLElBQUssQ0FBQyx5QkFBR0QsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUNoQyxLQUFNLENBQUVFLE9BQU8sQ0FBRUMsRUFBRSxDQUFFQyxFQUFHLENBQUMseUJBQUdKLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFFbEQsS0FBTSxDQUFFSyxnQkFBaUIsQ0FBQyx5QkFBR0wsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUVuRCxLQUFNTSxlQUFjLHlCQUFHLENBQ3JCQyxnQkFBZ0IsQ0FBRSxFQUFFLENBRXBCQyxnQkFBZ0IsQ0FBRSx1QkFBdUIsQ0FDekNDLGdCQUFnQixDQUFFLHVCQUF1QixDQUV6Q0MsMEJBQTBCLENBQUUsTUFBTSxDQUNsQ0Msa0JBQWtCLENBQUUsTUFBTSxDQUUxQkMsaUJBQWlCLENBQUUsUUFDckIsQ0FBQyxFQUVELGNBQWVDLElBQUcsRUFBSSx3QkFDcEIsS0FBTUMsZ0JBQWUseUJBQUcsMkJBQUFDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQyw4QkFBSSxPQUFPLEdBRWxELEtBQU1DLFdBQVUseUJBQUdoQixJQUFJLENBQUNpQixTQUFTLENBQUUsVUFBVSxDQUFFSixlQUFlLENBQUMsRUFDL0QsS0FBTUssYUFBWSx5QkFBRyxLQUFNakIsUUFBTyxDQUFDRCxJQUFJLENBQUNGLE1BQU0sRUFBRSxDQUFFLGFBQWEsQ0FBQyxDQUFDLEVBQ2pFLEtBQU1xQixlQUFjLHlCQUFHLEtBQU1sQixRQUFPLENBQUNELElBQUksQ0FBQ2tCLFlBQVksQ0FBRSxZQUFZLENBQUMsQ0FBQyx5QkFDdEUsS0FBTWhCLEdBQUUsQ0FBQ2MsVUFBVSxDQUFFRyxjQUFjLENBQUUsQ0FBRUMsU0FBUyxDQUFFLElBQUssQ0FBQyxDQUFDLHlCQUV6RCxLQUFNaEIsaUJBQWdCLENBQUNjLFlBQVksQ0FBQyx5QkFDcENKLE9BQU8sQ0FBQ08sR0FBRyxDQUFHQyxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBRWxCLGNBQWMsQ0FBRVMsT0FBTyxDQUFDTyxHQUFHLENBQUUsQ0FBRWYsZ0JBQWdCLENBQUVhLGNBQWUsQ0FBQyxDQUFDLHlCQUVsRyxHQUFJLENBQ0YsS0FBTUssY0FBYSwwQkFBR3pCLE9BQU8sQ0FBQyxjQUFjLENBQUMsMEJBQzdDLEtBQU15QixjQUFhLEVBQUUsQ0FDdkIsQ0FBQyxPQUFTLHlCQUNSLEtBQU1yQixHQUFFLENBQUNlLFlBQVksQ0FBRSxDQUFFRSxTQUFTLENBQUUsSUFBSyxDQUFDLENBQUMsQ0FDN0MsQ0FDRixDQUFDLHdCQUVEUixHQUFHLEVBQUUifQ==